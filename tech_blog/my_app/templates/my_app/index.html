{% extends 'my_app/my_app_base.html' %}
{% comment %} NB: Must load custom filter from html file you use them, wont work if they are in the base file!!!! {% endcomment %}
{% load comment_count %}

{% block body_block %}
<div class="row justify-content-center luxury_font">
    <div class="col-10">
        <h1>Published blogs</h1>

        {% for blog in blog_list %}
        <div class="tight_spacing">
            {% comment %} {% if blog.state == False %} {% endcomment %}
            {% comment %} Line redudant as get_queryset() call overidden in views to include a filter to filter out ojects with false state {% endcomment %}
            <p><a href="{% url 'my_app:detail' pk=blog.pk %}">{{blog.title}}</a></p> 
            <p>Author: {{blog.user}}</p>
            {% comment %} <p>State: {{blog.state}}</p> {% endcomment %}
            {% comment %} Only show approved comments {% endcomment %}
            <p>Comments: {{blog.comments.all|comment_count}}</a></p>
            {% comment %} <p><a href="{% url 'my_app:comment_list' %}">Comments: {{blog.comments.all.count}}</a></p> {% endcomment %}
            {% comment %} {% for comment in blog.comments.all %}
                <p>{{comment.content}}</p>
            {% endfor %} {% endcomment %}
        </div>
            <br>
        {% endfor %}
    </div>
</div>

{% endblock body_block %}